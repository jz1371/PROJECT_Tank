{"version":3,"file":"tank.min.js","sources":["tank.js"],"names":["angular","module","run","$rootScope","$translate","$log","realTimeService","randomService","levelsService","drawService","config","createCanvasController","canvas","gotStartMatch","params","yourPlayerIndex","playersInfo","matchController","isGameOngoing","isSinglePlayer","length","isSinglePlayerGlobal","bombCreatedNum","allTanks","allScores","index","create_tank","walls","create_walls","tank_array","create_bomb","d","startMatchTime","Date","getTime","timer","setDrawInterval","gotMessage","fromPlayerIndex","messageString","message","messageObject","fromJson","a","s","f","gotEndMatch","endMatchScores","stopDrawInterval","sendMessage","isReliable","toJson","sendReliableMessage","sendUnreliableMessage","lostMatch","endMatch","intervalMillis","Math","max","drawEveryMilliseconds","floor","drawInterval","setInterval","updateAndDraw","clearInterval","playerIndex","SNAKE_LENGTH","arr","i","push","x","y","canvasWidth","cellHeight","levelNum","randomFromTo","getNumberOfLevels","level","getLevel","map","j","generatePosForBomb","colsNum","rowsNum","pos","bomb","gamePaused","secondsFromStart","COUNT_DOWN_TO_START","changeDirQueue","draw","secondsToReallyStart","draw_prompt","ctx","changeBombPosition","changeDirection","nx","ny","check_collision","tail","pop","unshift","draw_canvas","array","ii","key","shift","bomb_speed","addChangeDir","dir","processTouch","e","preventDefault","touchobj","targetTouches","lastX","pageX","lastY","pageY","distX","distY","swipedir","absDistX","abs","absDistY","getContext","document","addEventListener","which","CANVAS","WIDTH","canvasHeight","HEIGHT","cellWidth","CELL","isHelpModalShown","timePaused","carouselClick","carouselClose","init","constant","service","yourColor","playerSnakeColor","fillStyle","font","fillText","CANVAS_WIDTH","CANVAS_HEIGHT","msg","color","toUpperCase","draw_tank","tank","globalAlpha","c","fillRect","CELL_WIDTH","CELL_HEIGHT","strokeStyle","shadowColor","strokeRect","draw_wall","WALL_WIDTH","WALL_HEIGHT","draw_timer","period","second","milli","draw_bomb","draw_score","players","score","show_dialogue","info","shadowBlur","clearShadows","textAlign","shadowOffsetX","shadowOffsetY","levels"],"mappings":"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"}