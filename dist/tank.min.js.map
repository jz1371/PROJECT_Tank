{"version":3,"file":"tank.min.js","sources":["tank.js"],"names":["angular","module","run","$translate","$log","realTimeService","randomService","levelsService","drawService","config","createCanvasController","canvas","gotStartMatch","params","yourPlayerIndex","playersInfo","matchController","isGameOngoing","isSinglePlayer","length","bombCreatedNum","allTanks","allScores","index","create_tank","walls","create_walls","tank_array","create_bomb","d","startMatchTime","Date","getTime","timer","setDrawInterval","gotMessage","fromPlayerIndex","messageString","message","messageObject","fromJson","a","s","f","gotEndMatch","endMatchScores","stopDrawInterval","sendMessage","isReliable","toJson","sendReliableMessage","sendUnreliableMessage","lostMatch","endMatch","intervalMillis","Math","max","drawEveryMilliseconds","floor","drawInterval","setInterval","updateAndDraw","clearInterval","playerIndex","SNAKE_LENGTH","arr","i","push","x","y","canvasWidth","cellHeight","levelNum","randomFromTo","getNumberOfLevels","level","getLevel","map","j","generatePosForBomb","colsNum","rowsNum","pos","bomb","secondsFromStart","COUNT_DOWN_TO_START","changeDirQueue","draw","secondsToReallyStart","draw_prompt","ctx","changeBombPosition","changeDirection","nx","ny","check_collision","tail","pop","unshift","draw_canvas","array","ii","key","shift","bomb_speed","addChangeDir","dir","processTouch","e","preventDefault","touchobj","targetTouches","lastX","pageX","lastY","pageY","distX","distY","swipedir","absDistX","abs","absDistY","getContext","document","addEventListener","which","CANVAS","WIDTH","canvasHeight","HEIGHT","cellWidth","CELL","init","constant","service","yourColor","playerSnakeColor","fillStyle","font","fillText","CANVAS_WIDTH","CANVAS_HEIGHT","msg","color","toUpperCase","draw_tank","tank","globalAlpha","c","fillRect","CELL_WIDTH","CELL_HEIGHT","strokeStyle","shadowColor","strokeRect","draw_wall","WALL_WIDTH","WALL_HEIGHT","draw_timer","period","second","milli","draw_bomb","draw_score","players","score","show_dialogue","info","shadowBlur","clearShadows","textAlign","shadowOffsetX","shadowOffsetY","levels"],"mappings":"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"}