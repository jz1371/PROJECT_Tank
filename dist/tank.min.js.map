{"version":3,"file":"tank.min.js","sources":["tank.js"],"names":["angular","module","run","$translate","$log","realTimeService","randomService","levelsService","drawService","config","createCanvasController","canvas","gotStartMatch","params","fpsmeter","window","FPSMeter","graph","theme","left","yourPlayerIndex","playersInfo","matchController","isGameOngoing","isSinglePlayer","length","bombCreatedNum","allTanks","allScores","index","create_tank","walls","create_walls","tank_array","create_bomb","d","startMatchTime","Date","getTime","timer","setDrawInterval","gotMessage","fromPlayerIndex","messageString","message","messageObject","fromJson","a","s","f","gotEndMatch","endMatchScores","stopDrawInterval","sendMessage","isReliable","toJson","sendReliableMessage","sendUnreliableMessage","lostMatch","endMatch","intervalMillis","Math","max","drawEveryMilliseconds","floor","drawInterval","setInterval","updateAndDraw","clearInterval","playerIndex","SNAKE_LENGTH","arr","i","push","x","y","canvasWidth","cellHeight","levelNum","randomFromTo","getNumberOfLevels","level","getLevel","map","j","generatePosForBomb","colsNum","rowsNum","pos","bomb","tickStart","secondsFromStart","COUNT_DOWN_TO_START","changeDirQueue","draw","secondsToReallyStart","draw_prompt","ctx","tick","changeBombPosition","changeDirection","nx","ny","check_collision","tail","pop","unshift","draw_canvas","array","ii","key","shift","bomb_speed","addChangeDir","dir","processTouch","e","preventDefault","touchobj","targetTouches","lastX","pageX","lastY","pageY","distX","distY","swipedir","absDistX","abs","absDistY","getContext","document","addEventListener","which","CANVAS","WIDTH","canvasHeight","HEIGHT","cellWidth","CELL","init","constant","service","yourColor","playerSnakeColor","fillStyle","font","fillText","CANVAS_WIDTH","CANVAS_HEIGHT","msg","color","toUpperCase","draw_tank","tank","globalAlpha","c","fillRect","CELL_WIDTH","CELL_HEIGHT","strokeStyle","shadowColor","strokeRect","draw_wall","WALL_WIDTH","WALL_HEIGHT","draw_timer","period","second","milli","draw_bomb","draw_score","players","score","show_dialogue","info","shadowBlur","clearShadows","textAlign","shadowOffsetX","shadowOffsetY","levels"],"mappings":"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"}