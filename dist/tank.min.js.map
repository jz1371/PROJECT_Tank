{"version":3,"file":"tank.min.js","sources":["tank.js"],"names":["angular","module","run","$rootScope","$translate","$log","realTimeService","randomService","levelsService","drawService","config","createCanvasController","canvas","gotStartMatch","params","fpsmeter","window","FPSMeter","graph","theme","left","yourPlayerIndex","playersInfo","matchController","isGameOngoing","isSinglePlayer","length","bombCreatedNum","allTanks","allScores","index","create_tank","walls","create_walls","tank_array","create_bomb","d","startMatchTime","Date","getTime","timer","setDrawInterval","gotMessage","fromPlayerIndex","messageString","message","messageObject","fromJson","a","s","f","gotEndMatch","endMatchScores","stopDrawInterval","sendMessage","isReliable","toJson","sendReliableMessage","sendUnreliableMessage","lostMatch","endMatch","intervalMillis","Math","max","drawEveryMilliseconds","floor","drawInterval","setInterval","updateAndDraw","clearInterval","playerIndex","SNAKE_LENGTH","arr","i","push","x","y","canvasWidth","cellHeight","levelNum","randomFromTo","getNumberOfLevels","level","getLevel","map","j","generatePosForBomb","colsNum","rowsNum","pos","bomb","gamePaused","undefined","tickStart","secondsFromStart","COUNT_DOWN_TO_START","changeDirQueue","draw","secondsToReallyStart","draw_prompt","ctx","tick","changeBombPosition","changeDirection","nx","ny","check_collision","tail","pop","unshift","pauseGame","draw_canvas","array","ii","key","shift","bomb_speed","addChangeDir","dir","processTouch","e","preventDefault","touchobj","targetTouches","lastX","pageX","lastY","pageY","distX","distY","swipedir","absDistX","abs","absDistY","getContext","document","getElementById","addEventListener","which","CANVAS","WIDTH","canvasHeight","HEIGHT","cellWidth","CELL","isHelpModalShown","init","constant","service","yourColor","playerSnakeColor","fillStyle","font","fillText","CANVAS_WIDTH","CANVAS_HEIGHT","msg","color","toUpperCase","draw_tank","tank","globalAlpha","c","fillRect","CELL_WIDTH","CELL_HEIGHT","strokeStyle","shadowColor","strokeRect","draw_wall","WALL_WIDTH","WALL_HEIGHT","draw_timer","period","second","milli","draw_bomb","draw_score","players","score","show_dialogue","info","shadowBlur","clearShadows","textAlign","shadowOffsetX","shadowOffsetY","levels"],"mappings":"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"}