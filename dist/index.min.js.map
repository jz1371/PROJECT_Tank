{"version":3,"file":"index.min.js","sources":["index.js"],"names":["angular","module","run","$translate","$log","realTimeService","randomService","levelsService","drawService","config","createCanvasController","canvas","gotStartMatch","params","yourPlayerIndex","playersInfo","matchController","isGameOngoing","isSinglePlayer","length","bombCreatedNum","allTanks","allScores","index","create_tank","walls","create_walls","tank_array","create_bomb","d","startMatchTime","Date","getTime","timer","setDrawInterval","gotMessage","fromPlayerIndex","messageString","message","messageObject","fromJson","a","s","f","gotEndMatch","endMatchScores","stopDrawInterval","sendMessage","isReliable","toJson","sendReliableMessage","sendUnreliableMessage","lostMatch","endMatch","intervalMillis","Math","max","drawEveryMilliseconds","floor","drawInterval","setInterval","updateAndDraw","clearInterval","playerIndex","SNAKE_LENGTH","arr","i","push","x","y","canvasWidth","cellHeight","levelNum","randomFromTo","getNumberOfLevels","level","getLevel","map","j","generatePosForBomb","colsNum","rowsNum","pos","bomb","secondsFromStart","COUNT_DOWN_TO_START","changeDirQueue","draw","secondsToReallyStart","draw_prompt","ctx","changeBombPosition","changeDirection","nx","ny","check_collision","tail","pop","unshift","draw_canvas","array","ii","key","shift","bomb_speed","addChangeDir","dir","processTouch","e","preventDefault","touchobj","targetTouches","lastX","pageX","lastY","pageY","distX","distY","swipedir","absDistX","abs","absDistY","getContext","document","addEventListener","which","CANVAS","WIDTH","canvasHeight","HEIGHT","cellWidth","CELL","init","$translateProvider","constant","service","yourColor","playerSnakeColor","fillStyle","font","fillText","CANVAS_WIDTH","CANVAS_HEIGHT","msg","instant","color","toUpperCase","draw_tank","tank","globalAlpha","c","fillRect","CELL_WIDTH","CELL_HEIGHT","strokeStyle","shadowColor","strokeRect","draw_wall","WALL_WIDTH","WALL_HEIGHT","draw_timer","period","second","milli","draw_bomb","draw_score","players","score","show_dialogue","info","shadowBlur","clearShadows","textAlign","shadowOffsetX","shadowOffsetY","levels"],"mappings":"AAOAA,QAAQC,OAAO,YAAaC,KAAK,aAAc,OAAQ,kBAAmB,gBAAgB,gBAAiB,cAAe,SACtH,SAAUC,EAAYC,EAAMC,EAAiBC,EAAeC,EAAeC,EAAaC,GAEpF,YAcA,SAASC,GAAuBC,GA2B5B,QAASC,GAAcC,GACnBC,EAAkBD,EAAOC,gBACzBC,EAAcF,EAAOE,YACrBC,EAAkBH,EAAOG,gBACzBC,GAAgB,EAChBC,EAAwC,IAAvBH,EAAYI,OAE7BC,EAAiB,EACjBC,KACAC,IACA,KAAK,GAAIC,GAAQ,EAAGA,EAAQR,EAAYI,OAAQI,IAE5CF,EAASE,GAASC,EAAYD,GAG9BE,EAAQC,IAGRJ,EAAUC,GAAS,CAEvBI,GAAaN,EAASP,GACtBc,IACAC,EAAI,QACJC,GAAiB,GAAIC,OAAOC,UAE5BC,EAAQH,EAERI,IAMJ,QAASC,GAAWtB,GAChB,GAAIuB,GAAkBvB,EAAOuB,gBACzBC,EAAgBxB,EAAOyB,QAGvBC,EAAgBvC,QAAQwC,SAASH,EAGrC,KAFAhB,EAASe,GAAmBG,EAAcE,EAC1CnB,EAAUc,GAAmBG,EAAcG,EACpCtB,EAAiBmB,EAAcI,GAClCf,IAIR,QAASgB,GAAYC,GAEjBvB,EAAYuB,EACZ5B,GAAgB,EAChB6B,IAGJ,QAASC,GAAYC,GACjB,IAAI9B,GAAmBD,EAAvB,CAGA,GAAIoB,GAAgBrC,QAAQiD,QACvBN,EAAGvB,EAAgBsB,EAAGpB,EAAUR,GAAkB2B,EAAGd,GACtDqB,GACAhC,EAAgBkC,oBAAoBb,GAEpCrB,EAAgBmC,sBAAsBd,IAI9C,QAASe,KACAnC,IAGLA,GAAgB,EAChBD,EAAgBqC,SAAS/B,IAQ7B,QAASY,KACLY,GAEA,IAAIQ,GAAiBC,KAAKC,IAAI,GAAIC,EAAwB,GAAKF,KAAKG,MAAMtC,EAAiB,GAC3FuC,GAAeC,YAAYC,EAAeP,GAG9C,QAASR,KACLgB,cAAcH,GAGlB,QAASnC,GAAYuC,GAGjB,IAAI,GAFA5C,GAAS6C,EACTC,KACIC,EAAI/C,EAAS,EAAG+C,GAAK,EAAGA,IAE5BD,EAAIE,MAAMC,EAAGF,EAAGG,EAAGC,EAAcC,EAAa,EAAIR,GAEtD,OAAOE,GAGX,QAASvC,KACL,GAAID,MACA+C,EAAWlE,EAAcmE,aAAa,EAAG,EAAGlE,EAAcmE,kBAC9DC,GAAQpE,EAAcqE,SAASJ,EAE/B,KAAK,GADDK,GAAMF,EAAME,IACPX,EAAI,EAAGA,EAAIW,EAAI1D,OAAQ+C,IAC5B,IAAK,GAAIY,GAAI,EAAGA,EAAID,EAAIX,GAAG/C,OAAQ2D,IACb,KAAdD,EAAIX,GAAGY,IACPrD,EAAM0C,MAAMC,EAAGU,EAAGT,EAAGH,GAIjC,OAAOzC,GAGX,QAASG,KACL,QAASmD,GAAmBtD,GAGxB,IAFA,GAAI2C,GAAI9D,EAAcmE,aAA8B,EAAjBrD,EAAoB,EAAG4D,GACtDX,EAAI/D,EAAcmE,aAA8B,EAAjBrD,EAAqB,EAAG,EAAG6D,GACvDxD,EAAMN,OAASiD,GAAK3C,EAAM2C,GAAGjD,OAASkD,GAAqB,IAAhB5C,EAAM2C,GAAGC,IACvDD,EAAI9D,EAAcmE,aAA8B,EAAjBrD,EAAoB,EAAG4D,GACtDX,EAAI/D,EAAcmE,aAA8B,EAAjBrD,EAAqB,EAAG,EAAG6D,EAE9D,QAAQb,EAAGA,EAAGC,EAAGA,GAErB,GAAIa,GAAMH,EAAmBtD,EAC7B0D,IACIf,EAAGc,EAAId,EACPC,EAAGa,EAAIb,GAEXjD,IACAc,IAGJ,QAAS2B,KACL,GAAK5C,EAAL,CAGA,GAAImE,GACA7B,KAAKG,QAAO,GAAI3B,OAAOC,UAAYF,GAAkB,IAEzD,IAAuBuD,EAAnBD,EAAwC,CAIxCE,KACAC,GAEA,IAAIC,GAAuBH,EAAsBD,CAIjD,YAFA5E,GAAYiF,YAAYC,EAAK5E,EAAiB0E,EAAsBb,EAAMA,OAK9E1C,GAAQ,GAAIF,OAAOC,UAAYF,EAE/B6D,EAAmBR,EAAMlD,GAEzB2D,GAKA,IAAIC,GAAKlE,EAAW,GAAGyC,EACnB0B,EAAKnE,EAAW,GAAG0C,CAkBvB,IAdU,UAANxC,EACAgE,IACa,SAANhE,EACPgE,IACa,OAANhE,EACPiE,IACa,SAANjE,GACPiE,IAOO,KAAPD,GAAaA,IAAOb,GAAkB,KAAPc,GAAaA,IAAOb,GACnDc,EAAgBF,EAAIC,EAAInE,GAExB,WADAyB,IAQJ,IACI4C,GADAhD,GAAa,CAEjB,IAAG6C,IAAOV,EAAKf,GAAK0B,IAAOX,EAAKd,EAO5B,MANAjB,KACAJ,GAAa,EACbgD,GAAQ5B,EAAGyB,EAAIxB,EAAGyB,GAClBxE,EAAUR,SAEVc,IAGAoE,GAAOrE,EAAWsE,MAClBD,EAAK5B,EAAIyB,EAAIG,EAAK3B,EAAIyB,EAI1BnE,EAAWuE,QAAQF,GAEnBjD,EAAYC,GACZuC,KAIJ,QAASA,KACL/E,EAAY2F,YAAYT,EAAKrE,EAAUP,EAAiBa,EAAYF,EAAOK,EAAgBqD,EAAM7D,EAAWP,EAAYI,QAG5H,QAAS4E,GAAgB3B,EAAGC,EAAG+B,GAG3B,IAAI,GAAIC,GAAK,EAAGA,EAAKD,EAAMjF,OAAQkF,IAC/B,GAAGD,EAAMC,GAAIjC,IAAMA,GAAKgC,EAAMC,GAAIhC,IAAMA,EACpC,OAAO,CAIf,KAAK,GAAIH,GAAI,EAAGA,EAAIzC,EAAMN,OAAQ+C,IAC9B,GAAIzC,EAAMyC,GAAGE,IAAMA,GAAK3C,EAAMyC,GAAGG,IAAMA,EACnC,OAAO,CAGf,QAAO,EAGX,QAASuB,KACL,GAAIU,GAAMhB,EAAeiB,OACpBD,KAGM,SAARA,GAAwB,UAANzE,EACjBA,EAAI,OACU,OAARyE,GAAsB,SAANzE,EACtBA,EAAI,KACU,UAARyE,GAAyB,SAANzE,EACzBA,EAAI,QACU,SAARyE,GAAwB,OAANzE,IACxBA,EAAI,SAIZ,QAAS8D,GAAmBR,EAAMlD,GAE1BA,EAAQ0C,EAAM6B,WAAapF,GAC3BQ,IAKR,QAAS6E,GAAaC,GACdpB,EAAenE,OAAS,GAAKmE,EAAeA,EAAenE,OAAS,KAAOuF,GAG/EpB,EAAenB,KAAKuC,GAgBxB,QAASC,GAAaC,GAClBA,EAAEC,gBACF,IAAIC,GAAWF,EAAEG,cAAc,EAC/B,IAAKD,EAAL,CAGA,GAAc,OAAVE,EAGA,MAFAA,GAAQF,EAASG,WACjBC,EAAQJ,EAASK,MAGrB,IAAIC,GAAQN,EAASG,MAAQD,EACzBK,EAAQP,EAASK,MAAQD,EACzBI,EAAW,KACXC,EAAWhE,KAAKiE,IAAIJ,GACpBK,EAAWlE,KAAKiE,IAAIH,IACpBE,GAAY,IAAME,GAAY,MAC9BT,EAAQF,EAASG,MACjBC,EAAQJ,EAASK,MAEbG,EADAC,EAAWE,EACQ,EAARL,EAAY,OAAS,QAEb,EAARC,EAAY,KAAO,OAElCZ,EAAaa,KAzUrB,GAOIjG,GACAM,EACAL,EACAF,EACAS,EACAsD,EACArD,EAEAL,EACAQ,EAEA0C,EAmFAhB,EArGA1C,GAAgB,EAChBC,GAAiB,EACjBH,EAAc,KACdD,EAAkB,KAClBE,EAAkB,KA+FlB0E,EAAM/E,EAAO+G,WAAW,MAyLxBpC,IASJqC,UAASC,iBAAiB,UAAW,SAAShB,GAC1C,GAAIN,GAAMM,EAAEiB,MACRnB,EAAc,KAARJ,EAAa,OACT,KAARA,EAAa,KACL,KAARA,EAAa,QACL,KAARA,EAAa,OAAS,IAChB,QAARI,GACAD,EAAaC,KAElB,EAEH,IAAIM,GAAQ,KAAME,EAAQ,IAwC1B,OAZAvG,GAAOiH,iBAAiB,aAAc,SAAShB,GAC3CI,EAAQ,KACRE,EAAQ,KACRP,EAAaC,KACd,GACHjG,EAAOiH,iBAAiB,YAAa,SAAShB,GAC1CD,EAAaC,KACd,GACHjG,EAAOiH,iBAAiB,WAAY,SAAShB,GACzCD,EAAaC,KACd,IAGChG,cAAeA,EACfuB,WAAYA,EACZS,YAAaA,GA1WrB,GAAI0B,GAAe7D,EAAOqH,OAAOC,MAC7BC,EAAevH,EAAOqH,OAAOG,OAE7BC,EAAazH,EAAO0H,KAAKJ,MACzBxD,EAAa9D,EAAO0H,KAAKF,OACzBhD,EAAUX,EAAe4D,EACzBlD,EAAUgD,EAAezD,EACzBd,EAAwB,IACxBO,EAAe,EACfqB,EAAsB5E,EAAO4E,mBAqWjChF,GAAgB+H,MACZ1H,uBAAwBA,EACxB4D,YAAaA,EACb0D,aAAcA,OAMrBvH,QAAQ,qBAAsB,SAAS4H,GAEpC,YAEAA,GAAmBD,MAAM,KAAM,UAUvCpI,QAAQC,OAAO,SAASqI,SAAS,UAC7BR,QACIC,MAAQ,IACRE,OAAQ,KAEZE,MACIJ,MAAQ,GACRE,OAAQ,IAEZ5C,oBAAqB,IAUzBrF,QAAQC,OAAO,SAASsI,QAAQ,eAAgB,OAAQ,aAAc,SAAU,SAASnI,EAAMD,EAAYM,GAEvG,YAyBA,SAASgF,GAAYC,EAAK5E,EAAiB0E,EAAsBb,GAC7D,GAAI6D,GAAYC,EAAiB3H,EACjC4E,GAAIgD,UAAYF,EAChB9C,EAAIiD,KAAO,iBACXjD,EAAIkD,SAAS,GAAKpD,EAAsBqD,EAAe,EAAGC,EAAgB,GAE1EpD,EAAIiD,KAAO,gBACX,IAAII,GAAM,QAAUpE,EAAQ,KAAQxE,EAAW6I,QAAQ,sBAClDC,MAAO9I,EAAW6I,QAAQR,EAAUU,gBACzCxD,GAAIkD,SAASG,EAAKF,EAAe,EAAI,GAAIC,EAAgB,EAAI,IAGjE,QAASK,GAAUzD,EAAK0D,EAAMrF,GAC1B2B,EAAI2D,YAAc,CAClB,KAAI,GAAInF,GAAI,EAAGA,EAAIkF,EAAKjI,OAAQ+C,IAAK,CACjC,GAAIoF,GAAIF,EAAKlF,GACT+E,EAAQR,EAAiB1E,GACzBK,EAAIkF,EAAElF,EACNC,EAAIiF,EAAEjF,CACVqB,GAAI2D,YAAc,EAAInF,EAAIkF,EAAKjI,OAC/BuE,EAAIgD,UAAYO,EACN,IAAN/E,EACAwB,EAAI6D,SAASnF,EAAIoF,EAAYnF,EAAIoF,EAAaD,EAAYC,GAE1D/D,EAAI6D,SAASnF,EAAIoF,EAAYnF,EAAIoF,EAAaD,EAAYC,GAE9D/D,EAAIgE,YAAc,QAClBhE,EAAIiE,YAAc,qBAClBjE,EAAIkE,WAAWxF,EAAEoF,EAAYnF,EAAEoF,EAAaD,EAAYC,GAE5D/D,EAAI2D,YAAc,EAGtB,QAASQ,GAAUnE,EAAKjE,GACpB,IAAK,GAAIyC,GAAI,EAAGA,EAAIzC,EAAMN,OAAQ+C,IAAK,CACnC,GAAIoF,GAAI7H,EAAMyC,GACVE,EAAIkF,EAAElF,EACNC,EAAIiF,EAAEjF,CACVqB,GAAIgD,UAAY,QAChBhD,EAAI6D,SAASnF,EAAI0F,EAAYzF,EAAI0F,EAAaD,EAAYC,GAC1DrE,EAAIgE,YAAc,QAClBhE,EAAIkE,WAAWxF,EAAI0F,EAAYzF,EAAG0F,EAAaD,EAAYC,IAInE,QAASC,GAAWtE,EAAK5D,GACrB,GAAIG,IAAQ,GAAIF,OAAOC,UAAYF,EAAuC,IAAtBuD,CACpD,IAAIpD,EAAQ,EAAG,CACX,GAAIgI,IAAS,GAAIlI,OAAOC,UAAYF,EAAuC,IAAtBuD,EACjD6E,EAAS3G,KAAKG,MAAMuG,EAAS,KAC7BE,EAAQ5G,KAAKG,OAAOuG,EAAkB,IAATC,GAAiB,GAClDjI,GAAQiI,EAAS,IAAMC,MAEvBlI,GAAQ,MAGZyD,GAAIiD,KAAO,iBACXjD,EAAIgD,UAAY,OAChB,IAAIK,GAAM5I,EAAW6I,QAAQ,YACxB/G,MAAOA,GACZyD,GAAIkD,SAAS,SAAWG,EAAKF,EAAe,EAAI,GAAIC,EAAgB,GAGxE,QAASsB,GAAU1E,EAAKtB,EAAGC,EAAG4E,GAC1BvD,EAAIgD,UAAYO,EAChBvD,EAAI6D,SAASnF,EAAEoF,EAAYnF,EAAEoF,EAAaD,EAAYC,GACtD/D,EAAIgE,YAAc,QAClBhE,EAAIkE,WAAWxF,EAAEoF,EAAYnF,EAAEoF,EAAaD,EAAYC,GAG5D,QAASY,GAAY3E,EAAKpE,EAAWgJ,GAEjC,IAAK,GAAIpG,GAAI,EAAGA,EAAI5C,EAAUH,OAAQ+C,IAAK,CACvCwB,EAAIiD,KAAO,gBACX,IAAIM,GAAQR,EAAiBvE,EAC7BwB,GAAIgD,UAAYO,CAChB,IAAIF,GAAM5I,EAAW6I,QAAQ,kBACxBC,MAAO9I,EAAW6I,QAAQC,EAAMC,eAAgBqB,MAAO,GAAKjJ,EAAU4C,IAC3EwB,GAAIkD,SAASG,EACT,EAAI7E,EAAI2E,EAAeyB,EAASxB,EAAgB,IAI5D,QAAS0B,GAAe9E,EAAK+E,GACzB/E,EAAIgD,UAAY,yBAChBhD,EAAIgE,YAAc,QAClBhE,EAAIiE,YAAc,qBAClBjE,EAAIgF,WAAa,GACjBhF,EAAI6D,SAASV,EAAe,EAAI,IAAKC,EAAgB,EAAI,IAAK,IAAK,KACnEpD,EAAIkE,WAAWf,EAAe,EAAI,IAAKC,EAAgB,EAAI,IAAK,IAAK,KACrE6B,EAAajF,GACbA,EAAIgD,UAAY,QAChBhD,EAAIiD,KAAO,qBACXjD,EAAIkF,UAAY,SAChBlF,EAAIkD,SAAS6B,EAAM5B,EAAe,EAAGC,EAAgB,GACrDpD,EAAIgD,UAAY,sBAChBhD,EAAIiD,KAAO,iBACXjD,EAAIkD,SAAS,oBAAqBC,EAAa,EAAGC,EAAc,EAAE,IAUtE,QAAS3C,GAAYT,EAAKrE,EAAUP,EAAiBa,EAAYF,EAAOK,EAAgBqD,EAAM7D,EAAWgJ,GAErG5E,EAAIgD,UAAY,QAChBhD,EAAI6D,SAAS,EAAG,EAAGV,EAAcC,GACjCpD,EAAIgE,YAAc,QAClBhE,EAAIkE,WAAW,EAAG,EAAGf,EAAcC,EAEnC,KAAK,GAAI5E,GAAI,EAAGA,EAAI7C,EAASF,OAAQ+C,IAC7BA,IAAMpD,GACNqI,EAAU9H,EAAS6C,GAAIA,EAK/BiF,GAAUzD,EAAK/D,EAAYb,GAG3B+I,EAAUnE,EAAKjE,GAEfuI,EAAWtE,EAAK5D,GAGhBsI,EAAU1E,EAAKP,EAAKf,EAAGe,EAAKd,EAAG,SAE/BgG,EAAW3E,EAAKpE,EAAWgJ,GArJ/B,GAAI7B,IACA,OAAQ,MAAU,QAAU,SAC5B,OAAQ,SAAU,SAAU,UAG5BI,EAAepI,EAAOqH,OAAOC,MAC7Be,EAAgBrI,EAAOqH,OAAOG,OAC9BuB,EAAa/I,EAAO0H,KAAKJ,MACzB0B,EAAchJ,EAAO0H,KAAKF,OAC1B6B,EAAa,GACbC,EAAc,GACd1E,EAAsB5E,EAAO4E,oBA2G7BsF,EAAe,SAASjF,GACxBA,EAAIiE,YAAc,EAClBjE,EAAIgF,WAAa,EACjBhF,EAAImF,cAAgB,EACpBnF,EAAIoF,cAAgB,EA8BxB,QACI3E,YAAaA,EACbV,YAAaA,EACb0D,UAAWA,EACXU,UAAWA,EACXO,UAAWA,EACXC,WAAYA,EACZL,WAAYA,EACZQ,cAAeA,MAMvBxK,QAAQC,OAAO,SAASsI,QAAQ,iBAAmB,WAE/C,YA6EA,SAAS3D,GAASD,GACd,MAAOoG,GAAOpG,GAxElB,GAAIoG,KAEIpG,MAAO,EACPE,gDAeK,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,OAG9D2B,WAAY,MAGZ7B,MAAO,EACPE,mDAgBK,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAG,QAG7D2B,WAAY,MAGZ7B,MAAO,EACPE,2BAQK,EAAE,IACF,GAAG,GAAG,GAAG,IACT,GAAG,GAAG,GAAI,EAAG,EAAG,EAAG,EAAE,GAAI,OAEzB,GAAI,EAAE,GAAG,GAAG,KACZ,GAAI,EAAE,GAAG,GAAG,WAGZ,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAE,GAAG,QAG7D2B,WAAY,KAQpB,QACI9B,kBAAmBqG,EAAO5J,OAC1ByD,SAAUA"}